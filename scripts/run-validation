#!/usr/bin/env bash
# run-validation â€” Manually trigger a memory validation session
# Usage: run-validation [count]
#   count  Number of random memories to validate (default: MEMORY_VALIDATION_AMOUNT from agent.conf, 0 = all)
set -euo pipefail

AGENT_DIR="${CLAUDE_PROJECT_DIR:-/home/yeyito/Workspace/Agent}"
source "${AGENT_DIR}/agent.conf"
COUNT="${1:-${MEMORY_VALIDATION_AMOUNT:-0}}"
echo "Validation: checking ${COUNT} memory/memories (0 = all)"

if [[ -n "${1:-}" ]]; then
  exec "${AGENT_DIR}/src/hooks/validation-memories.sh" --force "$1"
else
  exec "${AGENT_DIR}/src/hooks/validation-memories.sh" --force
fi
